### 1. 科学计算与 workflow 调度

#### 1.1 什么是科学计算

震波的分析进行石油勘探。在生命科学领域，科学家们通过对人类基因组排序来学习人类进化的规律等。科学计算给这些“分析”和“学习”提供了理论依据和方法。

科学计算需要处理的数据量巨大。比如CERN的大型对撞机平均每年都会产生millionsof gigabytes 的数据 (source: http://home.cern/about)。这些数据需要被收集，管理以及反复处理，以期从中发现物质的组成和宇宙的起源。这对数据格式、数据存储等的研究提出了很大的挑战。也算是大数据的一个典型应用。

科学计算涉及的计算一般也十分复杂。比如刚提到的石油勘探，为了能从地震波数据中发现有用信息，需要的计算量可以达到10+e22次浮点运算(source: http://blog.csdn.net/zhaogaishan/article/details/4813435)。即使假设我们能fullyutilize天河II的实际峰值运算能力，也需要82小时才能完成一次上述运算。并且，这一计算量会随着数据量的增长进一步增加。也就是说，我们每做一次数据分析，需要等上好几天才能看到分析结果，这显然不是我们希望的 [1]。

#### 1.2 什么是 Scientific Workflows

在科学计算中，我们会执行一些scientific simulation code 来生成数据，然后执行一些dataanalysis code 来分析数据。在这两个步骤之间，我们通常还会执行一些glue scripts (e.g., data formatconversion) 来自动化这一过程。这些具有数据dependency的codes通常被model成scientific workflow，每个code节点都是workflow中的一个task。我们利用scientific workflow这一模型来**automate** and **optimize**这些dependent tasks的执行 [1]。

#### 1.3 什么是 WfMS

我们需要设计专门的workflow management systems (WfMS)来运行和管理workflows[6] 。现有的WfMS分别具有一些自己的特点，而用户可以根据自己的需求从中选择最合适自己的系统来用。例如，Pegasus系统允许用户用XML-basedlanguage来描述workflow，并提供fault recovery 和dataprovenance information等功能。而Kepler系统提供图形界面帮助用户“画出”workflow结构，并且可以很容易将其embedded 到 webportal中。不同的WfMS系统的存在虽然给用户提供了更多的选择，但也增加了软件管理的复杂度。目前的一个研究趋势是，结合现在各种并行计算模型和open-sourced分布式系统，讨论是否能够利用现有系统来运行和管理workflow。其优点是很明显的，既能减少开发时间，又可以增加系统兼容性 [1]。

#### 1.4 Scientific Workflows 的优化

在实现了workflow的自动执行后，我们还需要去优化其执行过程，目前一般是通过优化workflowtasks的调度来实现的。对于scientificworkflow的优化一般涉及以下优化目标: 1) the performance of the workflows; 2)resource utilization during workflow executions; or 3) the operational cost forexecuting the workflows. 简单来说，用户们或者是希望他们的科学仿真和数据分析程序执行的越快越好（一般是科学家们），或者是希望计算平台的资源能够被高效地利用（一般是计算平台的管理者）。我们组在workflow的优化问题上也做过一些工作[1][2] [3] 。我们提出的Transformation-based Optimization Framework (ToF) [3]将workflowoptimization operations进行了抽象，并利用这些抽象了的优化操作给不同结构、类型的workflow提供统一的优化。我们的另一篇工作Deco[2] 考虑到了不同workflow优化问题的用户和优化目标的多样性，提出利用declarativelanguage让用户去描述其优化目标，并设计了一个generalized optimization engine来提供相应的优化solution。Workflow的优化还有很多待解决的问题需要我们去探讨，例如HPC上多用户多workflow之间的资源共享问题等 [1]。

### 1.5 应用前景

* 传统科学计算
* 大数据（分析、推荐）
* 机器学习

### 2. 研究基础与现状

#### 2.1 IaaS Workflows 调度算法分类

**2.1.1 应用模式**

调度算法的应用模式可以按照 Workflow 的多重性分为单工作流、一个工作流的多个实例和多工作流。

* 单工作流：单工作流被广泛应用于网格计算并且也是在云计算环境下最普遍的应用，这类调度算法专注于调度一个用户的一个工作流（DAG）的执行，既在 QoS 约束下优化花费。
* 一个工作流的多个实例：许多科学计算应用（e.g. balabala）将多个具有相同结构但是不同大小的工作流组合在一起组成一个合体，这类调度算法需要专注于一个合体整体的调度 QoS 约束而不是仅仅一个工作流。合体中 workflows 的数量是已知的，调度算法可以使用这些信息子在运行中来调整调度策略。
* 多工作流：多工作流与一个工作流的多个实例类似，但是多工作流中的工作流之间没有必要的联系和相似的结构，它们的 QoS 约束也没有联系，并且工作流的数量事先是不知道的，并且随时都有新的工作流加入到处理队列中。

**2.1.2 调度模式**

调度模型可以从以下四个方面进行分类：

* Task-VM 映射的动态性
  * 静态
  * 动态
  * 混合
    * 运行时调整
    * 静态子工作流
* 资源分配策略
  * 静态分配
    * 静态 VM 池
    * 弹性 VM 池
      * 任务调度
  * 动态分配
    * 弹性 VM 池
      * 约束要求
      * 性能指标
* 调度目标
  * 花费
  * 时间
  * 负载最大化
  * VM 利用率最大化
  * 能量消耗最小化
  * 可靠性感知
  * 安全感知
* 优化策略
  * 最优
  * 近似最优
    * 启发式
    * 元启发
    * 混合
      * 启发元启发
      * 启发最优



**静态 Task-VM 映射**：Task-VM 映射被实现规划好，并且运行时不允许更改。这种调度模式会导致多米诺效应：一个微小的失误就可以引起整个工作流的执行失败（达不到 QoS 要求）。一些算法使用了一些策略（e.g. 运行时预测，概率 QoS，资源性能变化模型等）来提升静态映射的适应性。静态映射的优点在于可以使用全局优化来获得工作流级别的高质量调度计划。

**动态 Task-VM 映射**：这种映射方式是动态的，映射策略基于系统当前状态和工作流的执行情况，这种适应能力使得它能在变化的环境中调整调度策略并到达用户的要求，这种高适应性使它适用于云环境下，但是任务级别的可视性影响了调度算法的优化性，伤害了找到高质量调度算法的能力。

**混合映射**：有些算法对静态映射和动态映射效果进行了折中，既保留了一定的优化性又具有一定的动态性。混合映射可以分为两类，运行时调度和静态子工作流。运行时调度首先根据目前的状态生成一个静态的映射方式，算法会选择更新一个任务的调度或者整个调度计划，更新一个任务会会更快，但是对以后工作流执行产生的影响将是不可预估的，更新整个工作流执行计划会导致大量的时间延迟和计算资源超载。静态子工作流根据系统目前的状况在每一轮调度中将任务的子集调度到适合的资源上，这种映射的缺点是静态指派任务，尽管在较小的程度上，会导致无法预测的延迟。

**静态 VM 池**：静态VM池一旦被确定下来，池内的资源会被租借，并且一直保持激活状态直到工作流执行结束。这种策略的优点在于调度算法在调度过程中只关心 Task-VM 之间的映射，资源分配和回收的延迟得到了很好的分摊，并且可以得到很好的管理，但是这种方式没有充分利用到云资源的伸缩性和计费模式，造成预算超标， 成本效益低，违背用户在经济方面的 QoS 要求。

**伸缩 VM 池**：这种策略使得调度算法可以在工作流的执行过程中动态地变更资源数量（VM的类型和数量），算法可以根据任务的约束条件（e.g. time deadline）或者系统的整体性能指标（e.g. VM利用率，吞吐量）来决定是否增添或者释放资源，

**2.1.3 资源模式**

#### 2.2 研究现状

**2.2.1 多截止期限约束下的 Scientific Workflows 调度算法**

**2.2.2 SABA**

**2.2.3 基于 PSO 的资源分配和调度算法**

**2.2.4 MOHEFT**

**2.2.5 资源竞拍下的容错调度算法**

**2.2.6 IC-PCP**

**2.2.7 EIPR**

**2.2.8 2层SLA约束下的workflow调度算法**

**2.2.9 PBTS**

**2.2.10 SPSS 和 DPDS**

**2.2.11 SPSS-ED 和 SPSS-EB**

**2.2.12 Dyna**

**2.2.13 SCS**

### 3. 结论

### 4. 参考

[1] Amelie Chi Zhou, http://blog.sciencenet.cn/blog-3224193-1009723.html