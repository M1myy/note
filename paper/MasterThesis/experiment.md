## 6.1 实验设置

在本章节中，我们通过真实和合成数据集上的实验评估了我们所提出的算法 的效率和可扩展性。下面，我们先在第 6.1 节中介绍实验设置，然后在第 6.2 节 中给出了 RSQ、RkSB 和 CRSQ 查询的实验结果和分析。

### 6.1.1 实验数据集

在实验当中，我们使用了真实数据集和合成数据集。其中真实数据集包括
CarDB和NBA。CarDB是一个包含45K个元素的数据集。可以从Yahoo! Autos 上获得。在实验中我们选择了其中的两个属性:价格(price)和里程数(mileage)。 NBA 这个数据集是从网站 www.databasebasketball.com 上获得的。它包含了运动员 15272 条记录。实验中，我们选择了其中的四个属性，即参加比赛的次数(GP)， 总得分(PTS)，篮板总数(REB)和助攻总数(AST)。除真实数据集外，我们 也产生了四个合成数据集，以检查该算法的可扩展性。这些合成的数据集遵循四 个不同的分布，即独立分布(IN)，聚集分布(CL)，相关分布(CO)，和反相关 分布(AC)。在 IN 数据集中所有的属性值是独立的均匀分布;CL 数据集包括 10 个随机的中心簇，它们每个簇遵循高斯分布并且包含相等数量的点;CO 数据集 中的点，如果其中一维较好，那么其它维也都好;对于 AC 数据集中的点，如果 其中一维较好，那么其他某一维或所有维都不好。图 6.1 所示的是二维情况下这 四种数据集的分布图。实验中，我们用 R-树对数据集建立索引，其中页面大小为 4096 字节。

工作流数据

云资源性能数据

### 6.1.2 实验环境配置

实验在各种参数下测试了本文提出的算法的性能，包括:预处理中保存的动 态 skyline 点的个数(t)、反 k-skyband 的厚度(k)、受限区域大小(CR)、维度 (dim)和数据集大小(N)。需要注意的是，在每个实验中，只有一个参数变化， 而其它的被固定到它们的缺省值。表 6.1 列出了参数的取值范围内和它们的缺省 值。实验中我们采用总时间(I/O 和 CPU 时间的总和)作为主要性能指标。本章 中的每一个报告的值是 100 次查询的平均值，而且查询点也遵循了相应的分布。
算法是使用 Matlab R2015b 实现的，实验所用的 PC 为 MacBook Pro，intel core i5 2.4 GHz 处理器和 4GB RAM，并在 MacOS Sierra 上运行。

### 6.1.3 实验流程

Cloudsim 仿真的一般流程:
 1 初始化 Cloudsim 包
作为 Cloudsim 实验仿真的第一步，首先需要进行相关参数的初始化工作，其 工作主要是在创建其他实体之前完成对 Cloudsim 相关参数的初始化工作，涉及的 参数主要包括日期、用户数量和跟踪标志。
2 创建数据中心
在这一步中涉及的工作主要包括主机列表的创建、PE 列表的创建、PE 的创建 以及 PE 基本参数的设定并将创建完成的 PE 加入到 PE 列表中、主机的创建以及 主机基本参数的设定、创建用于存储数据中心相关属性的数据中心特征对象、创 建数据中心对象并对其涉及的参数进行设定。
3 创建数据中心代理
用户对服务提供商提出的性能述求由数据中心代理负责从中协调，此外，服 务任务的部署工作同样由数据中心代理完成。需要注意的是在这一步中，用户可 以通过扩展数据中心代理函数的方式实现自定义的任务调度算法，在实现自定义 算法的过程中需要注意云资源调度控制模块与云资源负载预测模块之间的整合以 及数据的交互，由于商业数学软件 Matlab 的工具箱中提供了大量可用于时间序列 处理的函数供用户进行调用，所以，本课题选择在 Matlab 中对基于时间序列模型 ARMA 的预测机制进行实现，而云资源调度算法的实现则在 Cloudsim 中完成，由 于本文中提出的算法采取多平台分块实现的方式，因此，算法各个模块的整合以 及数据交互变的尤为重要，具体的整合方式为借助 C 语言实现 Cloudsim 中 Java 程序对于 Matlab 引擎的间接调用，其中涉及的技术包括混合编程、JNI 技术以及 面向 Matlab 引擎的函数调用技术。
4 创建虚拟机
在这一步中，主要是对虚拟机的参数进行相应的设置，其中包括 CPU、带宽、 内存等参数。
5 创建云任务
这一步的工作主要是创建云任务并对任务的长度和数量等参数进行相应的设 置。
6 调用用户自行开发的任务调度算法实现任务到虚拟机的映射分配
7 启动仿真
8 实验结果统计与分析
出于对实验结果说服力的考虑，仿真过程中均根据 Cloudsim3.0.1 中提供的
workload.plantlab.20110303 公共数据集建立相应的虚拟机列表和任务列表。

## 6.2 实验结果分析

### 6.2.1 参数分析

### 6.2.2 最优性分析

### 6.2.3 可扩展性分析

## 6.3 本章小结

本章为实验验证章节，在本章的开始首先对实验平台 Cloudsim 的体系结构以
及特点进行了简要的介绍，随后对实验环境的配置以及 Cloudsim 仿真的一般流程 进行了说明，通过采用开源云计算仿真平台 Cloudsim 联合商业数学软件 Matlab 进 行仿真实验，对本文中提出的基于时间序列预测的云资源调度策略的有效性进行 验证，为了保证实验仿真结果具有说服性，三组实验均采用 Cloudsim3.0.1 中提供 的 plantlab.20110303 公共数据集作为仿真实验数据集进行实验。
为了进一步说明算法的通用性，我们基于仿真平台 cloudsim3.0.1 对包括 LrrMu、 Thrmmt、ThrMu 在内的多个算法进行实验验证，通过对多组实验前后的仿真结果 进行对比分析，我们发现在添加了本文提出的基于时间序列预测的云资源调度算法后，原始算法的性能普遍得到更进一步的提升，包括主机开关机次数、SLA 违
反率、能耗在内的多项性能指标均达到了实验前的预想。