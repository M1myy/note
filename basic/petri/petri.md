### 1. Petri网是计算机的世界观

世界观就是对物理世界的观点和看法。用计算语言来说，就是给现实社会建立一个计算模型。人人都有自己的世界观，即每个人的头脑里都有一个对现实社会的基本映像，人就是根据这个映像来看待社会，并与社会交互的，这个映像就是模型。

**Petri**认为，世界观是与现实社会交互的必要前提；作为人类工具的计算机，也需要与现实社会交互；因此计算机也应该有世界观。为此，Petri给出这个计算机的世界观模型，就是被大家称为**Petri网**的系统理论。

按照Petri的逻辑，作为人类朋友的狗，也需要与现实社会交互啊，因此狗也有了世界观咯？这虽然是我的笑问，但他一定会回答：是的，如果我们关心狗怎样看世界，那么我们就要研究狗的世界观模型。现在我们关心计算机怎样看世界，所以要建立这个世界观模型。

所以Petri在袁老师的那本书的序中说："网论一开始就是以物理为基础，事实上这是用计算机科学的语言提出来的一种物理理论。"指的就是以上的意思。但研究网论的数学家们却极力否认，似乎认为与哲学挂钩会降低自己的身份。他们可以不管网论的物理解释，而邀游于纯理性的空间中，但我们计算机应用技术人员、特别是系统技术的研究设计人员却必须正视它，否则就不能够正确地实现和应用它。

### 2. Petri网模型

#### 2.1 Petri网的构成

纷繁复杂的计算机系统只有计算（就是软件构件系统）和存储（就是软件应用系统）两类元素而已。计算元素叫**同步元素（T元）**，用方框表示；存储元素叫**异步元素（S元）**，用圆形表示。

* 两类元素之间的关系构成为整个世界
* 关系只有边（T，S）和（S，T），没有（T，T）和（S，S）边
* 同步元素周围是异步元素，而异步元素周围一定是同步元素，边有方向
* 边里流动着的是消息，消息包括现实社会里的物资或者计算机世界里的数据

静态的Petri网，就是这样一个由同步元素、异步元素相互间隔而成的开放的可以无限扩展的有向网络（T，S；F），其中T是同步元素集合，S是异步元素集合，而F是边（T，S）和（S，T）的集合。

#### 2.2 同步元素

1. 同步元素是无状态元素，其内部实现就是一个用函数表示的加工
2. 元素有n条输入边和m条输出边，且n、m >= 1，即至少有一条输入边和一条输出边
3. 虽然元素内部的函数有确定的终生不变的输入参数和输出参数，但元素边的数量以及边中的消息却是可以随外界而变化的，但是一定保持输入边和输出边里的消息里含有的数据符合函数要求、且总质量不变。
4. 加工不会贪污，对输入的物资或者数据处理后的总质量保持不变。
5. 同步元素的同步是指同步元素周围的所有n+m条消息，要么同时发生，要么同时不发生，并且称这n+m条消息的同步为"一次执行"。即保证一次执行的原子性。

#### 2.3 异步元素

1. 异步元素也有n条输入边和m条输出边，且n+m >= 1，即至少有一条输入边或者一条输出边。
2. 异步元素总是被动地为同步元素提供或接受消息，一次一条。
3. 元素的邻居、及其间的消息，都是由系统定义，与元素自身无关。但要求元素能够接收和发出这些消息。
4. 元素的邻居数量、及其重要性不是一成不变的，在不同的应用环境里，可以有很大差别，如同人类的朋友关系。

#### 2.4 Petri网的运作

动态的Petri网，就是在同步元素周围发生的"一次一步"的消息传递，以及由此导致的异步元素里的物资或数据的变化。

同步元素是一个消息（里含有的物资或者数据的）加工系统，即现实世界里的加工厂或者计算机里的函数，叫"变迁"。异步元素就是一个消息（里含有的物资或者数据的）存储系统，即现实世界里的仓库或者计算机里的数据存储系统，叫"库所"。

Petri网是一个"自分解（解构、析构）"和"自组合（重组、重构）"的系统模型，即同步元素和异步元素都可以是另外一个Petri网系统。但其原子元素必须是计算机里的函数或者数据存储系统，即软件构件系统（software components system）或者软件存储系统（software storages system）。Petri网计算系统是建立在软件系统之上的一个P2P网络应用系统。

补充：Petri网就是把一个个封闭的图灵机系统用消息传递联系成为一个整体的"虚拟社会"的。Petri网把所有的软件系统统统分成两类：

1. 是计算元素的软件构件，如dll文件，是函数集合，负责消息处理和转换。因为计算元素不存储任何中间状态，所以必需立即把处理结果再用消息传递出去，因而叫又同步元素。
2. 是存储元素的软件应用系统，用于加工并保存消息中的有用数据。存储元素可以按照应用逻辑的要求保存或者提供（而不是同时既保存又提供）消息里的用户数据，因而又叫异步元素。所有软件系统要么属于计算元素，要么属于存储元素，没有第3类，不可能有既是计算元素同时又是存储元素的软件系统。

一个Petri网应用系统到底侧重于计算还是侧重于存储，我设计了一个衡量标准–同步度来评价。

### 参考

[1] only139, http://blog.csdn.net/oney139/article/details/39120323